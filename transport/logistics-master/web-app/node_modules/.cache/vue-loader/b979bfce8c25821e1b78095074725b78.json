{"remainingRequest":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\src\\views\\sale\\Create.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\src\\views\\sale\\Create.vue","mtime":1620229219000},{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686845412424},{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\vue-loader\\lib\\index.js","mtime":1686845393772}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7RmluZEFsbENvbW1vZGl0eX0gZnJvbSAiLi4vLi4vYXBpL2NvbW1vZGl0eSI7CmltcG9ydCB7U2F2ZVNhbGV9IGZyb20gIi4uLy4uL2FwaS9zYWxlIjsKCmV4cG9ydCBkZWZhdWx0IHsKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBsYWJlbENvbDoge3NwYW46IDZ9LAogICAgICB3cmFwcGVyQ29sOiB7c3BhbjogMTJ9LAogICAgICBjdXJyZW50OiAwLAogICAgICBzZWxlY3RJbmRleDogMCwKICAgICAgZHJpdmVyczogW10sCiAgICAgIHZlaGljbGVzOiBbXSwKICAgICAgY29tbW9kaXR5TGlzdDogW10sCiAgICAgIGZvcm06IHsKICAgICAgICBjb21wYW55OiAnJywKICAgICAgICBudW1iZXI6ICcnLAogICAgICAgIGNvbW1vZGl0eTogJycsCiAgICAgICAgY291bnQ6IDUwLAogICAgICAgIHByaWNlOiAwLAogICAgICAgIHBob25lOiAnJywKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgIH0sCiAgICB9CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIEZpbmRBbGxDb21tb2RpdHkoKS50aGVuKChyZXMpID0+IHsKICAgICAgaWYgKHJlcy5zdGF0dXMpIHRoaXMuY29tbW9kaXR5TGlzdCA9IHJlcy5kYXRhCiAgICB9KQogIH0sCgogIG1ldGhvZHM6IHsKICAgIG5leHQoKSB7CiAgICAgIGxldCBjb21tb2RpdHkgPSB0aGlzLmNvbW1vZGl0eUxpc3RbdGhpcy5zZWxlY3RJbmRleF0KICAgICAgdGhpcy5mb3JtLnByaWNlID0gdGhpcy5mb3JtLmNvdW50ICogY29tbW9kaXR5LnByaWNlCiAgICAgIHRoaXMuZm9ybS5jb21tb2RpdHkgPSBjb21tb2RpdHkubmFtZQogICAgICBjb25zb2xlLmxvZyh0aGlzLmZvcm0pCiAgICAgIHRoaXMuY3VycmVudCA9IDEKICAgIH0sCiAgICBzdWJtaXQoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgU2F2ZVNhbGUodGhpcy5mb3JtKS50aGVuKChyZXMpID0+IHsKICAgICAgICBpZiAocmVzLnN0YXR1cykgewogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IDIKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmj5DkuqTmiJDlip8iKQogICAgICAgICAgfSwgODAwKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5o+Q5Lqk5aSx6LSlIikKICAgICAgICAgIH0sIDgwMCkKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogIH0sCgp9Cg=="},{"version":3,"sources":["Create.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Create.vue","sourceRoot":"src/views/sale","sourcesContent":["<template>\n  <div class=\"main\">\n    <a-steps :current=\"current\">\n      <a-step title=\"填写信息\"></a-step>\n      <a-step title=\"确认信息\"/>\n      <a-step title=\"完成\"/>\n    </a-steps>\n    <div class=\"steps-content\">\n      <div v-if=\"current === 0\">\n        <a-form-model :model=\"form\" :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\n          <a-form-model-item label=\"公司名称\" required>\n            <a-input v-model=\"form.company\"/>\n          </a-form-model-item>\n          <a-form-model-item label=\"打款账号\" required>\n            <a-input v-model=\"form.number\"/>\n          </a-form-model-item>\n          <a-form-model-item label=\"售出商品\" required>\n            <a-select v-model=\"selectIndex\" placeholder=\"请选择商品\">\n              <a-select-option :value=\"index\" v-for=\"(item, index) in commodityList\" :key=\"index\">\n                {{ item.name }}\n              </a-select-option>\n            </a-select>\n          </a-form-model-item>\n          <a-form-model-item label=\"商品数量\" required>\n            <a-input-number v-model=\"form.count\"/>\n          </a-form-model-item>\n          <a-form-model-item label=\"预留电话\" required>\n            <a-input v-model=\"form.phone\"/>\n          </a-form-model-item>\n          <a-form-model-item label=\"备注信息\" required>\n            <a-input v-model=\"form.description\" type=\"textarea\" :rows=\"4\"/>\n          </a-form-model-item>\n          <a-form-model-item :wrapper-col=\"{ span: 14, offset: 6 }\">\n            <a-button type=\"primary\" @click=\"next\">\n              下一步\n            </a-button>\n          </a-form-model-item>\n        </a-form-model>\n      </div>\n      <div v-if=\"current === 1\" class=\"check\">\n        <p>收货公司： {{ form.company }}</p>\n        <p>打款账号： {{ form.number }}</p>\n        <p>售出商品： {{ form.commodity }}</p>\n        <p>商品数量： {{ form.count }}</p>\n        <p>预留电话： {{ form.phone }}</p>\n        <p>备注信息： {{ form.description }}</p>\n        <a-divider orientation=\"right\">\n          金额总计： {{ form.price }}\n        </a-divider>\n        <a-button type=\"danger\" style=\"margin-right: 20px\" :loading=\"loading\" @click=\"submit\">提交</a-button>\n        <a-button @click=\"current = 0\">上一步</a-button>\n      </div>\n      <div v-if=\"current === 2\">\n        <a-result\n            status=\"success\"\n            title=\"Submitted Successfully\"\n            sub-title=\"Please wait for the administrator to review the delivery request.\"\n        >\n          <template #extra>\n            <router-link to=\"/sale/record\">\n              <a-button key=\"console\" type=\"primary\">\n                Go Back\n              </a-button>\n            </router-link>\n            <a-button key=\"buy\" @click=\"current = 0\">\n              Submit Again\n            </a-button>\n          </template>\n        </a-result>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {FindAllCommodity} from \"../../api/commodity\";\nimport {SaveSale} from \"../../api/sale\";\n\nexport default {\n\n  data() {\n    return {\n      loading: false,\n      labelCol: {span: 6},\n      wrapperCol: {span: 12},\n      current: 0,\n      selectIndex: 0,\n      drivers: [],\n      vehicles: [],\n      commodityList: [],\n      form: {\n        company: '',\n        number: '',\n        commodity: '',\n        count: 50,\n        price: 0,\n        phone: '',\n        description: '',\n      },\n    }\n  },\n\n  mounted() {\n    FindAllCommodity().then((res) => {\n      if (res.status) this.commodityList = res.data\n    })\n  },\n\n  methods: {\n    next() {\n      let commodity = this.commodityList[this.selectIndex]\n      this.form.price = this.form.count * commodity.price\n      this.form.commodity = commodity.name\n      console.log(this.form)\n      this.current = 1\n    },\n    submit() {\n      this.loading = true\n      SaveSale(this.form).then((res) => {\n        if (res.status) {\n          setTimeout(() => {\n            this.loading = false\n            this.current = 2\n            this.$message.success(\"提交成功\")\n          }, 800)\n        } else {\n          setTimeout(() => {\n            this.loading = false\n            this.$message.error(\"提交失败\")\n          }, 800)\n        }\n      })\n    },\n  },\n\n}\n</script>\n\n<style scoped>\n.main {\n  padding: 50px 180px;\n  background: #ffffff;\n}\n\n.steps-content {\n  margin-top: 40px;\n}\n\n.check {\n  padding-left: 200px;\n}\n\n.check p {\n  padding-bottom: 10px;\n}\n\n.dis {\n  padding-left: 10px;\n  font-size: 10px;\n  letter-spacing: 1px;\n  color: red;\n}\n\n</style>"]}]}