{"remainingRequest":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\src\\views\\system\\Admin.vue?vue&type=style&index=0&id=140018e9&scoped=true&lang=css&","dependencies":[{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\src\\views\\system\\Admin.vue","mtime":1620229219000},{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\css-loader\\dist\\cjs.js","mtime":1686845410015},{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1686845393856},{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\postcss-loader\\src\\index.js","mtime":1686845399220},{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686845412424},{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\vue-loader\\lib\\index.js","mtime":1686845393772}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWRpdGFibGUtYWRkLWJ0biB7CiAgbWFyZ2luLWJvdHRvbTogMTVweDsKfQo="},{"version":3,"sources":["Admin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsOA;AACA;AACA","file":"Admin.vue","sourceRoot":"src/views/system","sourcesContent":["<template>\n  <div>\n    <a-button size=\"large\" class=\"editable-add-btn\" @click=\"addVisible = true\">\n      <a-icon type=\"plus\"/>\n      添加操作员\n    </a-button>\n    <a-table :columns=\"columns\" :data-source=\"admins\" rowKey=\"id\" :loading=\"loading\">\n      <a slot=\"email\" slot-scope=\"email\">{{ email }}</a>\n      <span slot=\"customTitle\"><a-icon type=\"smile-o\"/> 邮箱</span>\n      <span slot=\"tags\" slot-scope=\"tags\">\n      <a-tag\n          v-for=\"tag in tags\"\n          :key=\"tag\"\n          :color=\"tag === 'loser' ? 'volcano' : tag.length > 5 ? 'geekblue' : 'green'\"\n      >\n        {{ tag.toUpperCase() }}\n      </a-tag>\n    </span>\n      <span slot=\"action\" slot-scope=\"text, record, index\">\n      <a-dropdown>\n        <a class=\"ant-dropdown-link\" @click=\"e => e.preventDefault()\">Hover me <a-icon type=\"down\"/></a>\n        <a-menu slot=\"overlay\">\n          <a-menu-item>\n          <a-button type=\"link\" @click=\"updateEmail(index)\"><a-icon type=\"mail\"/> 邮箱修改</a-button>\n        </a-menu-item>\n      <a-menu-item>\n        <a-button type=\"link\" @click=\"updatePassword(index)\"><a-icon type=\"lock\"/> 密码修改</a-button>\n      </a-menu-item>\n      <a-menu-item>\n        <a-button type=\"link\" @click=\"updateRoles(index)\"><a-icon type=\"gateway\"/> 权限修改</a-button>\n      </a-menu-item>\n          <a-menu-item>\n        <a-button type=\"link\" @click=\"remove(record.id)\"><a-icon type=\"delete\"/> 删除</a-button>\n      </a-menu-item>\n    </a-menu>\n  </a-dropdown>\n    </span>\n    </a-table>\n\n    <a-modal\n        title=\"添加操作员\"\n        :visible=\"addVisible\"\n        @ok=\"submit\"\n        @cancel=\"addVisible = false\"\n    >\n      <a-form-model :model=\"selectAdmin\">\n        <a-form-model-item label=\"邮箱\">\n          <a-input v-model=\"selectAdmin.email\"/>\n        </a-form-model-item>\n        <a-form-model-item label=\"密码\">\n          <a-input v-model=\"selectAdmin.password\"/>\n        </a-form-model-item>\n      </a-form-model>\n    </a-modal>\n\n    <a-modal\n        title=\"密码修改\"\n        :visible=\"passwordVisible\"\n        @ok=\"submit\"\n        @cancel=\"passwordVisible = false\"\n    >\n      <a-form-model :model=\"selectAdmin\">\n        <a-form-model-item label=\"密码\">\n          <a-input v-model=\"selectAdmin.password\"/>\n        </a-form-model-item>\n      </a-form-model>\n    </a-modal>\n\n    <a-modal\n        title=\"邮箱修改\"\n        :visible=\"emailVisible\"\n        @ok=\"submit\"\n        @cancel=\"emailVisible = false\"\n    >\n      <a-form-model :model=\"selectAdmin\">\n        <a-form-model-item label=\"绑定邮箱\">\n          <a-input v-model=\"selectAdmin.email\"/>\n        </a-form-model-item>\n      </a-form-model>\n    </a-modal>\n\n    <a-modal\n        title=\"权限修改\"\n        width=\"500px\"\n        :visible=\"rolesVisible\"\n        @ok=\"submitRoles\"\n        @cancel=\"rolesVisible = false\"\n    >\n      <a-select\n          v-model=\"selectRoles\"\n          mode=\"multiple\"\n          style=\"width: 100%\"\n          placeholder=\"select one country\"\n          option-label-prop=\"label\"\n      >\n        <a-select-option :value=\"item.value\"\n                         :label=\"item.value\"\n                         v-for=\"(item ,index) in roles\"\n                         :key=\"index\">\n          <span role=\"img\" :aria-label=\"item.value\">🇨🇳</span>{{ item.value + ' (描述: ' + item.description + ')' }}\n        </a-select-option>\n      </a-select>\n    </a-modal>\n\n  </div>\n</template>\n<script>\nimport {DeleteAdmin, FindAllAdmin, SaveAdmin} from \"../../api/admin\";\nimport {FindAllRole} from \"../../api/role\";\n\nconst columns = [\n  {\n    dataIndex: 'email',\n    key: 'email',\n    slots: {title: 'customTitle'},\n    scopedSlots: {customRender: 'email'},\n  },\n  {\n    title: '密码',\n    dataIndex: 'password',\n    key: 'password',\n  },\n  {\n    title: '权限',\n    dataIndex: 'roles',\n    key: 'roles',\n  },\n  {\n    title: '添加日期',\n    key: 'createAt',\n    dataIndex: 'createAt',\n    scopedSlots: {customRender: 'createAt'},\n  },\n  {\n    title: 'Action',\n    key: 'action',\n    scopedSlots: {customRender: 'action'},\n  },\n];\n\nexport default {\n  data() {\n    return {\n      roles: [],\n      selectRoles: [],\n      admins: [],\n      loading: false,\n      addVisible: false,\n      emailVisible: false,\n      passwordVisible: false,\n      rolesVisible: false,\n      columns,\n      selectAdmin: {},\n    };\n  },\n\n  mounted() {\n    this.load()\n  },\n\n  methods: {\n\n    load() {\n      this.loading = true\n      FindAllRole().then((res) => {\n        if (res.status) this.roles = res.data\n      })\n      FindAllAdmin().then((res) => {\n        setTimeout(() => {\n          this.admins = res.data\n          this.loading = false\n        }, 600)\n      })\n    },\n\n    submit() {\n      SaveAdmin(this.selectAdmin).then((res) => {\n        if (res.status) this.$message.success(\"操作员信息更新成功\")\n        this.addVisible = false\n        this.emailVisible = false\n        this.rolesVisible = false\n        this.passwordVisible = false\n        this.load()\n      })\n    },\n\n    submitRoles() {\n      let str = ''\n      for (let i = 0; i < this.selectRoles.length; i++) {\n        if (i === this.selectRoles.length - 1) {\n          str += this.selectRoles[i]\n        } else {\n          str += this.selectRoles[i] + \";\"\n        }\n      }\n      this.selectAdmin.roles = str\n      this.submit()\n    },\n\n    updateEmail(index) {\n      this.emailVisible = true\n      this.selectAdmin = this.admins[index]\n    },\n\n    updatePassword(index) {\n      this.passwordVisible = true\n      this.selectAdmin = this.admins[index]\n    },\n\n    updateRoles(index) {\n      this.rolesVisible = true\n      this.selectAdmin = this.admins[index]\n      this.selectRoles = this.selectAdmin.roles.split(\";\")\n      console.log(this.selectRoles)\n    },\n\n    remove(id) {\n      DeleteAdmin(id).then((res) => {\n        if (res.status) this.$message.success(\"操作员删除成功\")\n        this.load()\n      })\n    },\n\n\n  },\n\n};\n</script>\n\n<style scoped>\n.editable-add-btn {\n  margin-bottom: 15px;\n}\n</style>\n"]}]}