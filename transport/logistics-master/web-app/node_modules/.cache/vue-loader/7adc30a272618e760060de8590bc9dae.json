{"remainingRequest":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\src\\views\\delivery\\List.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\src\\views\\delivery\\List.vue","mtime":1620229219000},{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686845412424},{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\vue-loader\\lib\\index.js","mtime":1686845393772}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7RmluZEFsbERpc3RyaWJ1dGlvbiwgU2F2ZURpc3RyaWJ1dGlvbn0gZnJvbSAiLi4vLi4vYXBpL2Rpc3RyaWJ1dGlvbiI7Cgpjb25zdCBjb2x1bW5zID0gWwogIHsKICAgIHRpdGxlOiAn5Y+45py6JywKICAgIGRhdGFJbmRleDogJ2RyaXZlcicsCiAgICBzY29wZWRTbG90czoge2N1c3RvbVJlbmRlcjogJ2RyaXZlcid9LAogIH0sCiAgewogICAgdGl0bGU6ICfovabniYzlj7cnLAogICAgZGF0YUluZGV4OiAnbnVtYmVyJywKICAgIHNjb3BlZFNsb3RzOiB7Y3VzdG9tUmVuZGVyOiAnbnVtYmVyJ30sCiAgfSwKICB7CiAgICB0aXRsZTogJ+WuouaIt+eUteivnScsCiAgICBkYXRhSW5kZXg6ICdwaG9uZScsCiAgICBzY29wZWRTbG90czoge2N1c3RvbVJlbmRlcjogJ3Bob25lJ30sCiAgfSwKICB7CiAgICB0aXRsZTogJ+WuouaIt+WcsOWdgCcsCiAgICBkYXRhSW5kZXg6ICdhZGRyZXNzJywKICAgIHNjb3BlZFNsb3RzOiB7Y3VzdG9tUmVuZGVyOiAnYWRkcmVzcyd9LAogIH0sCiAgewogICAgdGl0bGU6ICfms6jmhI/kuovpobknLAogICAgZGF0YUluZGV4OiAnY2FyZScsCiAgICBzY29wZWRTbG90czoge2N1c3RvbVJlbmRlcjogJ2NhcmUnfSwKICB9LAogIHsKICAgIHRpdGxlOiAn6aKE6K6h6YCB6L6+JywKICAgIGRhdGFJbmRleDogJ3RpbWUnLAogICAgc2NvcGVkU2xvdHM6IHtjdXN0b21SZW5kZXI6ICd0aW1lJ30sCiAgfSwKICB7CiAgICB0aXRsZTogJ+W9k+WJjeeKtuaAgScsCiAgICBkYXRhSW5kZXg6ICdzdGF0dXMnLAogICAgc2NvcGVkU2xvdHM6IHtjdXN0b21SZW5kZXI6ICdzdGF0dXMnfSwKICB9LAogIHsKICAgIHRpdGxlOiAn5pON5L2cJywKICAgIGRhdGFJbmRleDogJ29wZXJhdGlvbicsCiAgICBzY29wZWRTbG90czoge2N1c3RvbVJlbmRlcjogJ29wZXJhdGlvbid9LAogIH0sCl07CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlbGVjdDoge30sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBmb3JtOiB7CiAgICAgICAgY2FjaGVEYXRhOiBbXSwKICAgICAgICBuYW1lOiAnJywKICAgICAgICBnZW5kZXI6ICfnlLfmgKcnLAogICAgICAgIHBob25lOiAnJywKICAgICAgICBhZGRyZXNzOiAnJywKICAgICAgICBpZENhcmQ6ICcnLAogICAgICAgIGxpY2Vuc2U6ICcnLAogICAgICAgIHNjb3JlOiAxMiwKICAgICAgfSwKICAgICAgdmlzaWJsZTogZmFsc2UsCiAgICAgIHZpc2libGUyOiBmYWxzZSwKICAgICAgZGF0YTogW10sCiAgICAgIGNvbHVtbnMsCiAgICAgIGVkaXRpbmdLZXk6ICcnLAogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxvYWRUYWJsZURhdGEoKQogIH0sCiAgbWV0aG9kczogewogICAgbG9hZFRhYmxlRGF0YSgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICBGaW5kQWxsRGlzdHJpYnV0aW9uKCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMpIHsKICAgICAgICAgIHRoaXMuZGF0YSA9IHJlcy5kYXRhCiAgICAgICAgICB0aGlzLmNhY2hlRGF0YSA9IHJlcy5kYXRhLm1hcChpdGVtID0+ICh7Li4uaXRlbX0pKQogICAgICAgIH0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgfSwgNjAwKQogICAgICB9KQogICAgfSwKICAgIHN1Ym1pdEZvcm0oKSB7CiAgICAgIFNhdmVEaXN0cmlidXRpb24odGhpcy5mb3JtKS50aGVuKChyZXMpID0+IHsKICAgICAgICBpZiAocmVzLnN0YXR1cykgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCflj7jmnLrkv6Hmga/mj5DkuqTmiJDlip8nKTsKICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZQogICAgICAgIHRoaXMubG9hZFRhYmxlRGF0YSgpCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlQ2hhbmdlKHZhbHVlLCBpZCwgY29sdW1uKSB7CiAgICAgIGNvbnN0IG5ld0RhdGEgPSBbLi4udGhpcy5kYXRhXTsKICAgICAgY29uc3QgdGFyZ2V0ID0gbmV3RGF0YS5maWx0ZXIoaXRlbSA9PiBpZCA9PT0gaXRlbS5pZClbMF07CiAgICAgIGlmICh0YXJnZXQpIHsKICAgICAgICB0YXJnZXRbY29sdW1uXSA9IHZhbHVlOwogICAgICAgIHRoaXMuZGF0YSA9IG5ld0RhdGE7CiAgICAgIH0KICAgIH0sCiAgICBlZGl0KGlkKSB7CiAgICAgIGNvbnN0IG5ld0RhdGEgPSBbLi4udGhpcy5kYXRhXTsKICAgICAgY29uc3QgdGFyZ2V0ID0gbmV3RGF0YS5maWx0ZXIoaXRlbSA9PiBpZCA9PT0gaXRlbS5pZClbMF07CiAgICAgIHRoaXMuZWRpdGluZ0tleSA9IGlkOwogICAgICBpZiAodGFyZ2V0KSB7CiAgICAgICAgdGFyZ2V0LmVkaXRhYmxlID0gdHJ1ZTsKICAgICAgICB0aGlzLmRhdGEgPSBuZXdEYXRhOwogICAgICB9CiAgICB9LAoKICAgIHNhdmUoaWQsIGluZGV4KSB7CiAgICAgIGNvbnN0IG5ld0RhdGEgPSBbLi4udGhpcy5kYXRhXTsKICAgICAgY29uc3QgbmV3Q2FjaGVEYXRhID0gWy4uLnRoaXMuY2FjaGVEYXRhXTsKICAgICAgY29uc3QgdGFyZ2V0ID0gbmV3RGF0YS5maWx0ZXIoaXRlbSA9PiBpZCA9PT0gaXRlbS5pZClbMF07CiAgICAgIGNvbnN0IHRhcmdldENhY2hlID0gbmV3Q2FjaGVEYXRhLmZpbHRlcihpdGVtID0+IGlkID09PSBpdGVtLmlkKVswXTsKICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXRDYWNoZSkgewogICAgICAgIGRlbGV0ZSB0YXJnZXQuZWRpdGFibGU7CiAgICAgICAgdGhpcy5kYXRhID0gbmV3RGF0YTsKICAgICAgICBPYmplY3QuYXNzaWduKHRhcmdldENhY2hlLCB0YXJnZXQpOwogICAgICAgIHRoaXMuY2FjaGVEYXRhID0gbmV3Q2FjaGVEYXRhOwogICAgICB9CiAgICAgIHRoaXMuZWRpdGluZ0tleSA9ICcnOwogICAgICBTYXZlRGlzdHJpYnV0aW9uKG5ld0RhdGFbaW5kZXhdKS50aGVuKChyZXMpID0+IHsKICAgICAgICBpZiAocmVzLnN0YXR1cykgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLkv6Hmga/kv53lrZjmiJDlip8iKQogICAgICB9KQogICAgfSwKCiAgICBjYW5jZWwoaWQpIHsKICAgICAgY29uc3QgbmV3RGF0YSA9IFsuLi50aGlzLmRhdGFdOwogICAgICBjb25zdCB0YXJnZXQgPSBuZXdEYXRhLmZpbHRlcihpdGVtID0+IGlkID09PSBpdGVtLmlkKVswXTsKICAgICAgdGhpcy5lZGl0aW5nS2V5ID0gJyc7CiAgICAgIGlmICh0YXJnZXQpIHsKICAgICAgICBPYmplY3QuYXNzaWduKHRhcmdldCwgdGhpcy5jYWNoZURhdGEuZmlsdGVyKGl0ZW0gPT4gaWQgPT09IGl0ZW0uaWQpWzBdKTsKICAgICAgICBkZWxldGUgdGFyZ2V0LmVkaXRhYmxlOwogICAgICAgIHRoaXMuZGF0YSA9IG5ld0RhdGE7CiAgICAgIH0KICAgIH0sCgogICAgcmV2aWV3KGluZGV4KSB7CiAgICAgIHRoaXMuc2VsZWN0ID0gdGhpcy5kYXRhW2luZGV4XQogICAgICB0aGlzLnZpc2libGUyID0gdHJ1ZQogICAgfSwKCiAgICBhZ3JlZSgpIHsKICAgICAgdGhpcy5zZWxlY3Quc3RhdHVzID0gMQogICAgICBTYXZlRGlzdHJpYnV0aW9uKHRoaXMuc2VsZWN0KQogICAgfSwKCiAgICBzZXJ2aWNlKCl7CiAgICAgIHRoaXMuc2VsZWN0LnN0YXR1cyA9IDIKICAgICAgU2F2ZURpc3RyaWJ1dGlvbih0aGlzLnNlbGVjdCkKICAgIH0sCgogIH0sCn07Cg=="},{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA","file":"List.vue","sourceRoot":"src/views/delivery","sourcesContent":["<template>\n  <div>\n    <a-table :loading=\"loading\" :columns=\"columns\" :data-source=\"data\" bordered rowKey=\"id\">\n      <span slot=\"status\" slot-scope=\"status\">\n        <a-tag v-if=\"status===0\" color=\"#f50\">等待审核</a-tag>\n        <a-tag v-if=\"status===1\" color=\"#87d068\">正在运输</a-tag>\n        <a-tag v-if=\"status===2\" color=\"#2db7f5\">配送完成</a-tag>\n      </span>\n      <template\n          v-for=\"col in ['phone','address']\"\n          :slot=\"col\"\n          slot-scope=\"text, record, index\"\n      >\n        <div :key=\"col\">\n          <a-input\n              v-if=\"record.editable\"\n              style=\"margin: -5px 0\"\n              :value=\"text\"\n              @change=\"e => handleChange(e.target.value, record.id, col)\"\n          />\n          <template v-else>\n            {{ text }}\n          </template>\n        </div>\n      </template>\n      <template slot=\"operation\" slot-scope=\"text, record, index\">\n        <div class=\"editable-row-operations\">\n          <span v-if=\"record.editable\">\n          <a @click=\"() => save(record.id, index)\">保存</a>\n          <a-popconfirm title=\"Sure to cancel?\" @confirm=\"() => cancel(record.id)\">\n            <a>取消</a>\n          </a-popconfirm>\n        </span>\n          <span v-else>\n          <a :disabled=\"editingKey !== ''\" @click=\"() => edit(record.id)\">编辑</a>\n        </span>\n          <a-button @click=\"review(index)\" type=\"link\" v-if=\"record.status===0\">审核</a-button>\n          <a-button @click=\"review(index)\" type=\"link\" v-if=\"record.status===1\">配送</a-button>\n          <a-button @click=\"review(index)\" type=\"link\" v-if=\"record.status===2\">查看</a-button>\n        </div>\n      </template>\n    </a-table>\n\n    <a-modal\n        title=\"Title\"\n        :visible=\"visible\"\n        @ok=\"submitForm\"\n        @cancel=\"visible = false\"\n    >\n      <a-form-model :model=\"form\">\n        <a-form-model-item label=\"姓名\">\n          <a-input v-model=\"form.name\" placeholder=\"请输入司机姓名\"/>\n        </a-form-model-item>\n        <a-form-model-item label=\"身份证号\">\n          <a-input v-model=\"form.idCard\" placeholder=\"请输入司机身份证信息\"/>\n        </a-form-model-item>\n        <a-form-model-item label=\"联系方式\">\n          <a-input v-model=\"form.phone\" placeholder=\"请输入手机号码\"/>\n        </a-form-model-item>\n        <a-form-item label=\"驾照信息\">\n          <a-row :gutter=\"20\">\n            <a-col :span=\"12\">\n              <a-input v-model=\"form.license\" addon-before=\"驾驶证\" default-value=\"0571\"/>\n            </a-col>\n            <a-col :span=\"7\">\n              <a-input-number v-model=\"form.score\" addon-before=\"分数\" default-value=\"12\" :min=\"0\" :max=\"12\"/>\n            </a-col>\n          </a-row>\n        </a-form-item>\n        <a-form-model-item label=\"性别\">\n          <a-radio-group v-model=\"form.gender\">\n            <a-radio value=\"男性\">男性</a-radio>\n            <a-radio value=\"女性\">女性</a-radio>\n          </a-radio-group>\n        </a-form-model-item>\n        <a-form-model-item label=\"家庭住址\">\n          <a-input v-model=\"form.address\" type=\"textarea\"/>\n        </a-form-model-item>\n      </a-form-model>\n    </a-modal>\n\n    <a-modal\n        title=\"Title\"\n        :visible=\"visible2\"\n        width=\"60%\"\n        :footer=\"null\"\n        @cancel=\"visible2 = false\"\n    >\n      <a-steps :current=\"select.status\" style=\"padding: 50px\">\n        <a-step title=\"确认信息无误\"/>\n        <a-step title=\"开始配送\"/>\n        <a-step title=\"配送完成\"/>\n      </a-steps>\n      <div class=\"content\">\n        <div v-if=\"select.status === 0\" class=\"check\">\n          <p>送货司机： {{ select.driver }}</p>\n          <p>车牌号码： {{ select.number }}</p>\n          <p>加急处理： {{ select.urgent }}</p>\n          <p>注意事项： {{ select.care }}</p>\n          <p>客户电话： {{ select.phone }}</p>\n          <p>客户地址： {{ select.address }}</p>\n          <p>预计送达： {{ select.time }}</p>\n          <a-button type=\"danger\" style=\"margin-right: 20px\" :loading=\"loading\" @click=\"agree\">通过</a-button>\n          <a-button @click=\"visible2 = false\">不通过</a-button>\n        </div>\n        <div v-if=\"select.status === 1\">\n          <a-result\n              status=\"success\"\n              title=\"Successfully passed the audit!\"\n              >\n            <template #extra>\n              <a-button @click=\"service\" key=\"console\" type=\"primary\">\n                已送达目的地\n              </a-button>\n            </template>\n          </a-result>\n        </div>\n        <div v-if=\"select.status === 2\">\n          <a-result\n              status=\"success\"\n              title=\"运输订单已成功送达\"\n          >\n            <template #extra>\n              <a-button @click=\"visible2 = false\" key=\"console\" type=\"primary\">\n                确定\n              </a-button>\n            </template>\n          </a-result>\n        </div>\n      </div>\n\n    </a-modal>\n\n  </div>\n</template>\n\n<script>\nimport {FindAllDistribution, SaveDistribution} from \"../../api/distribution\";\n\nconst columns = [\n  {\n    title: '司机',\n    dataIndex: 'driver',\n    scopedSlots: {customRender: 'driver'},\n  },\n  {\n    title: '车牌号',\n    dataIndex: 'number',\n    scopedSlots: {customRender: 'number'},\n  },\n  {\n    title: '客户电话',\n    dataIndex: 'phone',\n    scopedSlots: {customRender: 'phone'},\n  },\n  {\n    title: '客户地址',\n    dataIndex: 'address',\n    scopedSlots: {customRender: 'address'},\n  },\n  {\n    title: '注意事项',\n    dataIndex: 'care',\n    scopedSlots: {customRender: 'care'},\n  },\n  {\n    title: '预计送达',\n    dataIndex: 'time',\n    scopedSlots: {customRender: 'time'},\n  },\n  {\n    title: '当前状态',\n    dataIndex: 'status',\n    scopedSlots: {customRender: 'status'},\n  },\n  {\n    title: '操作',\n    dataIndex: 'operation',\n    scopedSlots: {customRender: 'operation'},\n  },\n];\n\nexport default {\n  data() {\n    return {\n      select: {},\n      loading: false,\n      form: {\n        cacheData: [],\n        name: '',\n        gender: '男性',\n        phone: '',\n        address: '',\n        idCard: '',\n        license: '',\n        score: 12,\n      },\n      visible: false,\n      visible2: false,\n      data: [],\n      columns,\n      editingKey: '',\n    };\n  },\n  mounted() {\n    this.loadTableData()\n  },\n  methods: {\n    loadTableData() {\n      this.loading = true\n      FindAllDistribution().then((res) => {\n        if (res.status) {\n          this.data = res.data\n          this.cacheData = res.data.map(item => ({...item}))\n        }\n        setTimeout(() => {\n          this.loading = false\n        }, 600)\n      })\n    },\n    submitForm() {\n      SaveDistribution(this.form).then((res) => {\n        if (res.status) this.$message.success('司机信息提交成功');\n        this.visible = false\n        this.loadTableData()\n      })\n    },\n    handleChange(value, id, column) {\n      const newData = [...this.data];\n      const target = newData.filter(item => id === item.id)[0];\n      if (target) {\n        target[column] = value;\n        this.data = newData;\n      }\n    },\n    edit(id) {\n      const newData = [...this.data];\n      const target = newData.filter(item => id === item.id)[0];\n      this.editingKey = id;\n      if (target) {\n        target.editable = true;\n        this.data = newData;\n      }\n    },\n\n    save(id, index) {\n      const newData = [...this.data];\n      const newCacheData = [...this.cacheData];\n      const target = newData.filter(item => id === item.id)[0];\n      const targetCache = newCacheData.filter(item => id === item.id)[0];\n      if (target && targetCache) {\n        delete target.editable;\n        this.data = newData;\n        Object.assign(targetCache, target);\n        this.cacheData = newCacheData;\n      }\n      this.editingKey = '';\n      SaveDistribution(newData[index]).then((res) => {\n        if (res.status) this.$message.success(\"信息保存成功\")\n      })\n    },\n\n    cancel(id) {\n      const newData = [...this.data];\n      const target = newData.filter(item => id === item.id)[0];\n      this.editingKey = '';\n      if (target) {\n        Object.assign(target, this.cacheData.filter(item => id === item.id)[0]);\n        delete target.editable;\n        this.data = newData;\n      }\n    },\n\n    review(index) {\n      this.select = this.data[index]\n      this.visible2 = true\n    },\n\n    agree() {\n      this.select.status = 1\n      SaveDistribution(this.select)\n    },\n\n    service(){\n      this.select.status = 2\n      SaveDistribution(this.select)\n    },\n\n  },\n};\n</script>\n<style scoped>\n\n.editable-add-btn {\n  margin-bottom: 15px;\n}\n\n.editable-row-operations a {\n  margin-right: 8px;\n}\n\n.content {\n  padding: 50px 0;\n}\n\n\n.check {\n  padding-left: 200px;\n}\n\n.check p {\n  padding-bottom: 20px;\n}\n</style>\n"]}]}