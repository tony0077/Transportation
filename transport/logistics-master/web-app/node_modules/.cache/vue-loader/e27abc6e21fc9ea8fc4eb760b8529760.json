{"remainingRequest":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\src\\views\\delivery\\Create.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\src\\views\\delivery\\Create.vue","mtime":1620229219000},{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686845412424},{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\vue-loader\\lib\\index.js","mtime":1686845393772}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7RmluZEFsbENhblVzZSwgU2F2ZURpc3RyaWJ1dGlvbn0gZnJvbSAiLi4vLi4vYXBpL2Rpc3RyaWJ1dGlvbiI7CgpleHBvcnQgZGVmYXVsdCB7CgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgbGFiZWxDb2w6IHtzcGFuOiA2fSwKICAgICAgd3JhcHBlckNvbDoge3NwYW46IDEyfSwKICAgICAgY3VycmVudDogMCwKICAgICAgc2VsZWN0RHJpdmVySW5kZXg6IDAsCiAgICAgIHNlbGVjdFZlaGljbGVJbmRleDogMCwKICAgICAgZHJpdmVyczogW10sCiAgICAgIHZlaGljbGVzOiBbXSwKICAgICAgZm9ybTogewogICAgICAgIGlkOiAnJywKICAgICAgICBkaWQ6ICcnLAogICAgICAgIHZpZDogJycsCiAgICAgICAgZHJpdmVyOiAnJywKICAgICAgICBudW1iZXI6ICcnLAogICAgICAgIHBob25lOiAnJywKICAgICAgICBhZGRyZXNzOiAnJywKICAgICAgICB1cmdlbnQ6IGZhbHNlLAogICAgICAgIGNhcmVzOiBbXSwKICAgICAgICBjYXJlOiAnJywKICAgICAgICB0aW1lOiAnJywKICAgICAgICBzdGF0dXM6IDAsCiAgICAgIH0sCiAgICB9CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIEZpbmRBbGxDYW5Vc2UoKS50aGVuKChyZXMpID0+IHsKICAgICAgaWYgKHJlcy5zdGF0dXMpIHsKICAgICAgICB0aGlzLmRyaXZlcnMgPSByZXMuZGF0YS5kcml2ZXJzCiAgICAgICAgdGhpcy52ZWhpY2xlcyA9IHJlcy5kYXRhLnZlaGljbGVzCiAgICAgIH0KICAgICAgY29uc29sZS5sb2codGhpcy5kcml2ZXJzKQogICAgICBjb25zb2xlLmxvZyh0aGlzLnZlaGljbGVzKQogICAgfSkKICB9LAoKICBtZXRob2RzOiB7CiAgICBuZXh0KCkgewogICAgICBsZXQgY2FyZSA9ICcnCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mb3JtLmNhcmVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY2FyZSArPSB0aGlzLmZvcm0uY2FyZXNbaV0gKyAiLCAiCiAgICAgIH0KICAgICAgdGhpcy5mb3JtLmRyaXZlciA9IHRoaXMuZHJpdmVyc1t0aGlzLnNlbGVjdERyaXZlckluZGV4XS5uYW1lCiAgICAgIHRoaXMuZm9ybS5kaWQgPSB0aGlzLmRyaXZlcnNbdGhpcy5zZWxlY3REcml2ZXJJbmRleF0uaWQKICAgICAgdGhpcy5mb3JtLm51bWJlciA9IHRoaXMudmVoaWNsZXNbdGhpcy5zZWxlY3RWZWhpY2xlSW5kZXhdLm51bWJlcgogICAgICB0aGlzLmZvcm0udmlkID0gdGhpcy52ZWhpY2xlc1t0aGlzLnNlbGVjdFZlaGljbGVJbmRleF0uaWQKICAgICAgdGhpcy5mb3JtLmNhcmUgPSBjYXJlCiAgICAgIHRoaXMuY3VycmVudCA9IDEKICAgIH0sCiAgICBzdWJtaXQoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgU2F2ZURpc3RyaWJ1dGlvbih0aGlzLmZvcm0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIGlmIChyZXMuc3RhdHVzKSB7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgdGhpcy5jdXJyZW50ID0gMgogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuaPkOS6pOaIkOWKn++8jOivt+etieW+heWuoeaguCIpCiAgICAgICAgICB9LCA4MDApCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmj5DkuqTlpLHotKUiKQogICAgICAgICAgfSwgODAwKQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgfSwKCn0K"},{"version":3,"sources":["Create.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Create.vue","sourceRoot":"src/views/delivery","sourcesContent":["<template>\n  <div class=\"main\">\n    <a-steps :current=\"current\">\n      <a-step title=\"填写申请信息\"></a-step>\n      <a-step title=\"确认配送信息\"/>\n      <a-step title=\"完成申请\"/>\n    </a-steps>\n    <div class=\"steps-content\">\n      <div v-if=\"current === 0\">\n        <a-form-model :model=\"form\" :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\n          <a-form-model-item label=\"选择司机\" required>\n            <a-select v-model=\"selectDriverIndex\" placeholder=\"请选择配送司机\">\n              <a-select-option :value=\"index\" v-for=\"(item, index) in drivers\" :key=\"index\" :disabled=\"item.driving\">\n                {{ item.name }}\n                <i class=\"dis\" v-if=\"item.driving\">\n                  <a-icon type=\"close-circle\"/>\n                  正在途中</i>\n              </a-select-option>\n            </a-select>\n          </a-form-model-item>\n          <a-form-model-item label=\"选择运输车辆\" required>\n            <a-select v-model=\"selectVehicleIndex\" placeholder=\"请选择配送车辆\">\n              <a-select-option :value=\"index\" v-for=\"(item, index) in vehicles\" :key=\"index\" :disabled=\"item.driving\">\n                {{ item.type }} : {{ item.number }}\n                <i class=\"dis\" v-if=\"item.driving\">\n                  <a-icon type=\"close-circle\"/>\n                  正在途中</i>\n              </a-select-option>\n            </a-select>\n          </a-form-model-item>\n          <a-form-model-item label=\"预计交货时间\" required>\n            <a-date-picker\n                v-model=\"form.time\"\n                show-time\n                type=\"date\"\n                placeholder=\"选择日期\"\n                style=\"width: 100%;\"\n            />\n          </a-form-model-item>\n          <a-form-model-item label=\"加急处理\">\n            <a-switch v-model=\"form.urgent\"/>\n          </a-form-model-item>\n          <a-form-model-item label=\"注意事项\">\n            <a-checkbox-group v-model=\"form.cares\">\n              <a-checkbox value=\"冰柜冷藏\" name=\"type\">\n                冰柜冷藏\n              </a-checkbox>\n              <a-checkbox value=\"注意易碎\" name=\"type\">\n                注意易碎\n              </a-checkbox>\n              <a-checkbox value=\"防止高温\" name=\"type\">\n                防止高温\n              </a-checkbox>\n            </a-checkbox-group>\n          </a-form-model-item>\n          <a-form-model-item label=\"客户电话\" required>\n            <a-input v-model=\"form.phone\"/>\n          </a-form-model-item>\n          <a-form-model-item label=\"客户地址\" required>\n            <a-input v-model=\"form.address\" type=\"textarea\" :rows=\"4\"/>\n          </a-form-model-item>\n          <a-form-model-item :wrapper-col=\"{ span: 14, offset: 6 }\">\n            <a-button type=\"primary\" @click=\"next\">\n              下一步\n            </a-button>\n          </a-form-model-item>\n        </a-form-model>\n      </div>\n      <div v-if=\"current === 1\" class=\"check\">\n        <p>送货司机： {{ form.driver }}</p>\n        <p>车牌号码： {{ form.number }}</p>\n        <p>加急处理： {{ form.urgent }}</p>\n        <p>注意事项： {{ form.care }}</p>\n        <p>客户电话： {{ form.phone }}</p>\n        <p>客户地址： {{ form.address }}</p>\n        <p>预计送达： {{ form.time }}</p>\n        <a-button type=\"danger\" style=\"margin-right: 20px\" :loading=\"loading\" @click=\"submit\">提交</a-button>\n        <a-button @click=\"current = 0\">上一步</a-button>\n      </div>\n      <div v-if=\"current === 2\">\n        <a-result\n            status=\"success\"\n            title=\"Submitted Successfully\"\n            sub-title=\"Please wait for the administrator to review the delivery request.\"\n        >\n          <template #extra>\n            <router-link to=\"/delivery/list\">\n              <a-button key=\"console\" type=\"primary\">\n                Go Console\n              </a-button>\n            </router-link>\n            <a-button key=\"buy\" @click=\"current = 0\">\n              Submit Again\n            </a-button>\n          </template>\n        </a-result>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {FindAllCanUse, SaveDistribution} from \"../../api/distribution\";\n\nexport default {\n\n  data() {\n    return {\n      loading: false,\n      labelCol: {span: 6},\n      wrapperCol: {span: 12},\n      current: 0,\n      selectDriverIndex: 0,\n      selectVehicleIndex: 0,\n      drivers: [],\n      vehicles: [],\n      form: {\n        id: '',\n        did: '',\n        vid: '',\n        driver: '',\n        number: '',\n        phone: '',\n        address: '',\n        urgent: false,\n        cares: [],\n        care: '',\n        time: '',\n        status: 0,\n      },\n    }\n  },\n\n  mounted() {\n    FindAllCanUse().then((res) => {\n      if (res.status) {\n        this.drivers = res.data.drivers\n        this.vehicles = res.data.vehicles\n      }\n      console.log(this.drivers)\n      console.log(this.vehicles)\n    })\n  },\n\n  methods: {\n    next() {\n      let care = ''\n      for (let i = 0; i < this.form.cares.length; i++) {\n        care += this.form.cares[i] + \", \"\n      }\n      this.form.driver = this.drivers[this.selectDriverIndex].name\n      this.form.did = this.drivers[this.selectDriverIndex].id\n      this.form.number = this.vehicles[this.selectVehicleIndex].number\n      this.form.vid = this.vehicles[this.selectVehicleIndex].id\n      this.form.care = care\n      this.current = 1\n    },\n    submit() {\n      this.loading = true\n      SaveDistribution(this.form).then((res) => {\n        if (res.status) {\n          setTimeout(() => {\n            this.loading = false\n            this.current = 2\n            this.$message.success(\"提交成功，请等待审核\")\n          }, 800)\n        } else {\n          setTimeout(() => {\n            this.loading = false\n            this.$message.error(\"提交失败\")\n          }, 800)\n        }\n      })\n    },\n  },\n\n}\n</script>\n\n<style scoped>\n.main {\n  padding: 50px 180px;\n  background: #ffffff;\n}\n\n.steps-content {\n  margin-top: 40px;\n}\n\n.check {\n  padding-left: 200px;\n}\n\n.check p {\n  padding-bottom: 10px;\n}\n\n.dis {\n  padding-left: 10px;\n  font-size: 10px;\n  letter-spacing: 1px;\n  color: red;\n}\n\n</style>"]}]}