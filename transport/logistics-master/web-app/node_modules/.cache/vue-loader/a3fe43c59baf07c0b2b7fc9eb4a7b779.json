{"remainingRequest":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\src\\views\\basics\\Details.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\src\\views\\basics\\Details.vue","mtime":1620229219000},{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686845412424},{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\vue-loader\\lib\\index.js","mtime":1686845393772}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7RmluZEFsbENvbW1vZGl0eX0gZnJvbSAiLi4vLi4vYXBpL2NvbW1vZGl0eSI7CmltcG9ydCB7RmluZEFsbEludmVudG9yeSwgSW5BbmRPdXR9IGZyb20gIi4uLy4uL2FwaS9pbnZlbnRvcnkiOwppbXBvcnQgSW52ZW50b3J5UmVjb3JkcyBmcm9tICIuLi8uLi9jb21wb25lbnRzL0ludmVudG9yeVJlY29yZHMiOwoKY29uc3QgY29sdW1ucyA9IFsKICB7CiAgICB0aXRsZTogJ+WVhuWTgUlEJywKICAgIGRhdGFJbmRleDogJ2lkJywKICAgIGtleTogJ2lkJywKICAgIHdpZHRoOiAnNTAlJwogIH0sCiAgewogICAgZGF0YUluZGV4OiAnbmFtZScsCiAgICBrZXk6ICduYW1lJywKICAgIHNsb3RzOiB7dGl0bGU6ICdjdXN0b21UaXRsZSd9LAogICAgc2NvcGVkU2xvdHM6IHtjdXN0b21SZW5kZXI6ICduYW1lJ30sCiAgfSwKICB7CiAgICB0aXRsZTogJ+W6k+WtmOaVsOmHjycsCiAgICBkYXRhSW5kZXg6ICdjb3VudCcsCiAgICBrZXk6ICdjb3VudCcsCiAgICBzY29wZWRTbG90czoge2N1c3RvbVJlbmRlcjogJ2NvdW50J30sCiAgfSwKXTsKCmV4cG9ydCBkZWZhdWx0IHsKCiAgY29tcG9uZW50czoge0ludmVudG9yeVJlY29yZHN9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAganNvbl9maWVsZHM6IHsKICAgICAgICAi5ZWG5ZOBSUQiOiAiY2lkIiwKICAgICAgICAi5ZWG5ZOB5ZCN56ewIjogIm5hbWUiLAogICAgICAgICLlupPlrZjnm5jngrnmlbDph48iOiAiY291bnQiLAogICAgICB9LAogICAgICBpZDogdGhpcy4kcm91dGUucGFyYW1zLmlkLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgdmlzaWJsZTogZmFsc2UsCiAgICAgIHJlY29yZFZpc2libGU6IGZhbHNlLAogICAgICBzZWxlY3RJbmRleDogMCwKICAgICAgY29tbW9kaXR5VmlzaWJsZTogZmFsc2UsCiAgICAgIGRhdGE6IFtdLAogICAgICBjb2x1bW5zLAogICAgICBjb21tb2RpdHlMaXN0OiBbXSwKICAgICAgc3VibWl0VHlwZTogJycsCiAgICAgIGZvcm06IHsKICAgICAgICB3aWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwKICAgICAgICBjaWQ6ICcnLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBjb3VudDogNTAsCiAgICAgIH0sCiAgICB9CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMubG9hZERhdGEoKQogICAgRmluZEFsbENvbW1vZGl0eSgpLnRoZW4oKHJlcykgPT4gewogICAgICBpZiAocmVzLnN0YXR1cykgdGhpcy5jb21tb2RpdHlMaXN0ID0gcmVzLmRhdGEKICAgIH0pCiAgfSwKCiAgbWV0aG9kczogewoKICAgIGxvYWREYXRhKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlCiAgICAgIEZpbmRBbGxJbnZlbnRvcnkodGhpcy4kcm91dGUucGFyYW1zLmlkKS50aGVuKChyZXMpID0+IHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuZGF0YSA9IHJlcy5kYXRhCiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAgIH0sIDUwMCkKICAgICAgfSkKICAgIH0sCgogICAgaGFuZGxlU3VibWl0KHR5cGUpIHsKICAgICAgdGhpcy5zdWJtaXRUeXBlID0gdHlwZQogICAgICB0aGlzLnZpc2libGUgPSB0cnVlCiAgICB9LAoKICAgIHN1Ym1pdCgpIHsKICAgICAgdGhpcy5mb3JtLmNpZCA9IHRoaXMuY29tbW9kaXR5TGlzdFt0aGlzLnNlbGVjdEluZGV4XS5pZAogICAgICB0aGlzLmZvcm0ubmFtZSA9IHRoaXMuY29tbW9kaXR5TGlzdFt0aGlzLnNlbGVjdEluZGV4XS5uYW1lCiAgICAgIEluQW5kT3V0KHRoaXMuc3VibWl0VHlwZSwgdGhpcy5mb3JtKS50aGVuKChyZXMpID0+IHsKICAgICAgICBpZiAocmVzLnN0YXR1cykgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKQogICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlCiAgICAgICAgdGhpcy5sb2FkRGF0YSgpCiAgICAgIH0pCiAgICB9LAoKICB9Cgp9Cg=="},{"version":3,"sources":["Details.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"Details.vue","sourceRoot":"src/views/basics","sourcesContent":["<template>\n  <div class=\"main\">\n    <div class=\"header\">\n      <router-link to=\"/warehouse\">\n        <a-icon type=\"arrow-left\" style=\"padding-right: 5px\"/>\n        返回上一页\n      </router-link>\n    </div>\n    <div style=\"display: flex\">\n      <a-button class=\"editable-btn\" @click=\"handleSubmit('in')\">\n        入库商品\n      </a-button>\n      <a-button class=\"editable-btn\" @click=\"handleSubmit('out')\">\n        出库商品\n      </a-button>\n      <download-excel\n          class=\"export-excel-wrapper\"\n          :data=\"data\"\n          :fields=\"json_fields\"\n          name=\"库存报表.xls\">\n        <a-button class=\"editable-btn\">\n          <a-icon type=\"cloud-download\"/>\n          下载库存报表 Excel\n        </a-button>\n      </download-excel>\n      <a-button class=\"editable-btn\" @click=\"recordVisible = true\">\n        <a-icon type=\"retweet\"/>\n        出入库记录 Excel\n      </a-button>\n    </div>\n\n    <a-table :loading=\"loading\" :columns=\"columns\" :data-source=\"data\" rowKey=\"id\">\n      <a slot=\"name\" slot-scope=\"text\">{{ text }}</a>\n      <span slot=\"customTitle\"><a-icon type=\"smile-o\"/> 商品名</span>\n      <span slot=\"count\" slot-scope=\"count\">\n        <a-tag color=\"#108ee9\">{{ count }}</a-tag>\n      </span>\n    </a-table>\n\n    <a-modal\n        title=\"入库 ｜ 出库\"\n        :closable=\"false\"\n        :visible=\"visible\"\n        @ok=\"submit\"\n        @cancel=\"visible = false\"\n    >\n      <a-form-model :model=\"form\">\n        <a-form-model-item label=\"请选商品\">\n          <a-select v-model=\"selectIndex\" placeholder=\"请选择入库的商品\">\n            <a-select-option :value=\"index\" v-for=\"(item, index) in commodityList\" :key=\"index\">\n              {{ item.name }}\n            </a-select-option>\n          </a-select>\n        </a-form-model-item>\n        <a-form-model-item label=\"商品数量\">\n          <a-input-number id=\"inputNumber\" v-model=\"form.count\" :min=\"1\"/>\n        </a-form-model-item>\n        <a-form-model-item label=\"备注\">\n          <a-input :rows=\"4\" v-model=\"form.description\" type=\"textarea\"/>\n        </a-form-model-item>\n      </a-form-model>\n    </a-modal>\n\n    <a-modal\n        title=\"出入库记录\"\n        width=\"80%\"\n        :visible=\"recordVisible\"\n        :footer=\"null\"\n        @cancel=\"recordVisible = false\"\n    >\n      <InventoryRecords :warehouse-id=\"id\"/>\n    </a-modal>\n\n  </div>\n</template>\n\n<script>\nimport {FindAllCommodity} from \"../../api/commodity\";\nimport {FindAllInventory, InAndOut} from \"../../api/inventory\";\nimport InventoryRecords from \"../../components/InventoryRecords\";\n\nconst columns = [\n  {\n    title: '商品ID',\n    dataIndex: 'id',\n    key: 'id',\n    width: '50%'\n  },\n  {\n    dataIndex: 'name',\n    key: 'name',\n    slots: {title: 'customTitle'},\n    scopedSlots: {customRender: 'name'},\n  },\n  {\n    title: '库存数量',\n    dataIndex: 'count',\n    key: 'count',\n    scopedSlots: {customRender: 'count'},\n  },\n];\n\nexport default {\n\n  components: {InventoryRecords},\n\n  data() {\n    return {\n      json_fields: {\n        \"商品ID\": \"cid\",\n        \"商品名称\": \"name\",\n        \"库存盘点数量\": \"count\",\n      },\n      id: this.$route.params.id,\n      loading: false,\n      visible: false,\n      recordVisible: false,\n      selectIndex: 0,\n      commodityVisible: false,\n      data: [],\n      columns,\n      commodityList: [],\n      submitType: '',\n      form: {\n        wid: this.$route.params.id,\n        cid: '',\n        name: '',\n        description: '',\n        count: 50,\n      },\n    }\n  },\n\n  mounted() {\n    this.loadData()\n    FindAllCommodity().then((res) => {\n      if (res.status) this.commodityList = res.data\n    })\n  },\n\n  methods: {\n\n    loadData() {\n      this.loading = true\n      FindAllInventory(this.$route.params.id).then((res) => {\n        setTimeout(() => {\n          this.data = res.data\n          this.loading = false\n        }, 500)\n      })\n    },\n\n    handleSubmit(type) {\n      this.submitType = type\n      this.visible = true\n    },\n\n    submit() {\n      this.form.cid = this.commodityList[this.selectIndex].id\n      this.form.name = this.commodityList[this.selectIndex].name\n      InAndOut(this.submitType, this.form).then((res) => {\n        if (res.status) this.$message.success(\"操作成功\")\n        this.visible = false\n        this.loadData()\n      })\n    },\n\n  }\n\n}\n</script>\n\n\n<style scoped>\n.main {\n  background: #ffffff;\n  padding: 30px;\n}\n\n.header {\n  font-size: 18px;\n  margin-bottom: 40px;\n}\n\na {\n  color: #000000;\n}\n\n.header a:hover {\n  color: #5a84fd;\n}\n\n.editable-btn {\n  margin-bottom: 20px;\n  margin-right: 10px;\n}\n\n.in-icon {\n  transform: rotate(270deg);\n}\n</style>"]}]}