{"remainingRequest":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\src\\views\\basics\\Details.vue?vue&type=style&index=0&id=5079ecb2&scoped=true&lang=css&","dependencies":[{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\src\\views\\basics\\Details.vue","mtime":1620229219000},{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\css-loader\\dist\\cjs.js","mtime":1686845410015},{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1686845393856},{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\postcss-loader\\src\\index.js","mtime":1686845399220},{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686845412424},{"path":"D:\\桌面文件\\logistics-master\\logistics-master\\web-app\\node_modules\\vue-loader\\lib\\index.js","mtime":1686845393772}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLm1haW4gewogIGJhY2tncm91bmQ6ICNmZmZmZmY7CiAgcGFkZGluZzogMzBweDsKfQoKLmhlYWRlciB7CiAgZm9udC1zaXplOiAxOHB4OwogIG1hcmdpbi1ib3R0b206IDQwcHg7Cn0KCmEgewogIGNvbG9yOiAjMDAwMDAwOwp9CgouaGVhZGVyIGE6aG92ZXIgewogIGNvbG9yOiAjNWE4NGZkOwp9CgouZWRpdGFibGUtYnRuIHsKICBtYXJnaW4tYm90dG9tOiAyMHB4OwogIG1hcmdpbi1yaWdodDogMTBweDsKfQoKLmluLWljb24gewogIHRyYW5zZm9ybTogcm90YXRlKDI3MGRlZyk7Cn0K"},{"version":3,"sources":["Details.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8KA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Details.vue","sourceRoot":"src/views/basics","sourcesContent":["<template>\n  <div class=\"main\">\n    <div class=\"header\">\n      <router-link to=\"/warehouse\">\n        <a-icon type=\"arrow-left\" style=\"padding-right: 5px\"/>\n        返回上一页\n      </router-link>\n    </div>\n    <div style=\"display: flex\">\n      <a-button class=\"editable-btn\" @click=\"handleSubmit('in')\">\n        入库商品\n      </a-button>\n      <a-button class=\"editable-btn\" @click=\"handleSubmit('out')\">\n        出库商品\n      </a-button>\n      <download-excel\n          class=\"export-excel-wrapper\"\n          :data=\"data\"\n          :fields=\"json_fields\"\n          name=\"库存报表.xls\">\n        <a-button class=\"editable-btn\">\n          <a-icon type=\"cloud-download\"/>\n          下载库存报表 Excel\n        </a-button>\n      </download-excel>\n      <a-button class=\"editable-btn\" @click=\"recordVisible = true\">\n        <a-icon type=\"retweet\"/>\n        出入库记录 Excel\n      </a-button>\n    </div>\n\n    <a-table :loading=\"loading\" :columns=\"columns\" :data-source=\"data\" rowKey=\"id\">\n      <a slot=\"name\" slot-scope=\"text\">{{ text }}</a>\n      <span slot=\"customTitle\"><a-icon type=\"smile-o\"/> 商品名</span>\n      <span slot=\"count\" slot-scope=\"count\">\n        <a-tag color=\"#108ee9\">{{ count }}</a-tag>\n      </span>\n    </a-table>\n\n    <a-modal\n        title=\"入库 ｜ 出库\"\n        :closable=\"false\"\n        :visible=\"visible\"\n        @ok=\"submit\"\n        @cancel=\"visible = false\"\n    >\n      <a-form-model :model=\"form\">\n        <a-form-model-item label=\"请选商品\">\n          <a-select v-model=\"selectIndex\" placeholder=\"请选择入库的商品\">\n            <a-select-option :value=\"index\" v-for=\"(item, index) in commodityList\" :key=\"index\">\n              {{ item.name }}\n            </a-select-option>\n          </a-select>\n        </a-form-model-item>\n        <a-form-model-item label=\"商品数量\">\n          <a-input-number id=\"inputNumber\" v-model=\"form.count\" :min=\"1\"/>\n        </a-form-model-item>\n        <a-form-model-item label=\"备注\">\n          <a-input :rows=\"4\" v-model=\"form.description\" type=\"textarea\"/>\n        </a-form-model-item>\n      </a-form-model>\n    </a-modal>\n\n    <a-modal\n        title=\"出入库记录\"\n        width=\"80%\"\n        :visible=\"recordVisible\"\n        :footer=\"null\"\n        @cancel=\"recordVisible = false\"\n    >\n      <InventoryRecords :warehouse-id=\"id\"/>\n    </a-modal>\n\n  </div>\n</template>\n\n<script>\nimport {FindAllCommodity} from \"../../api/commodity\";\nimport {FindAllInventory, InAndOut} from \"../../api/inventory\";\nimport InventoryRecords from \"../../components/InventoryRecords\";\n\nconst columns = [\n  {\n    title: '商品ID',\n    dataIndex: 'id',\n    key: 'id',\n    width: '50%'\n  },\n  {\n    dataIndex: 'name',\n    key: 'name',\n    slots: {title: 'customTitle'},\n    scopedSlots: {customRender: 'name'},\n  },\n  {\n    title: '库存数量',\n    dataIndex: 'count',\n    key: 'count',\n    scopedSlots: {customRender: 'count'},\n  },\n];\n\nexport default {\n\n  components: {InventoryRecords},\n\n  data() {\n    return {\n      json_fields: {\n        \"商品ID\": \"cid\",\n        \"商品名称\": \"name\",\n        \"库存盘点数量\": \"count\",\n      },\n      id: this.$route.params.id,\n      loading: false,\n      visible: false,\n      recordVisible: false,\n      selectIndex: 0,\n      commodityVisible: false,\n      data: [],\n      columns,\n      commodityList: [],\n      submitType: '',\n      form: {\n        wid: this.$route.params.id,\n        cid: '',\n        name: '',\n        description: '',\n        count: 50,\n      },\n    }\n  },\n\n  mounted() {\n    this.loadData()\n    FindAllCommodity().then((res) => {\n      if (res.status) this.commodityList = res.data\n    })\n  },\n\n  methods: {\n\n    loadData() {\n      this.loading = true\n      FindAllInventory(this.$route.params.id).then((res) => {\n        setTimeout(() => {\n          this.data = res.data\n          this.loading = false\n        }, 500)\n      })\n    },\n\n    handleSubmit(type) {\n      this.submitType = type\n      this.visible = true\n    },\n\n    submit() {\n      this.form.cid = this.commodityList[this.selectIndex].id\n      this.form.name = this.commodityList[this.selectIndex].name\n      InAndOut(this.submitType, this.form).then((res) => {\n        if (res.status) this.$message.success(\"操作成功\")\n        this.visible = false\n        this.loadData()\n      })\n    },\n\n  }\n\n}\n</script>\n\n\n<style scoped>\n.main {\n  background: #ffffff;\n  padding: 30px;\n}\n\n.header {\n  font-size: 18px;\n  margin-bottom: 40px;\n}\n\na {\n  color: #000000;\n}\n\n.header a:hover {\n  color: #5a84fd;\n}\n\n.editable-btn {\n  margin-bottom: 20px;\n  margin-right: 10px;\n}\n\n.in-icon {\n  transform: rotate(270deg);\n}\n</style>"]}]}